<script>
    let a = [1, 2, [3, 4], 5, [6, [7]], [2, 3, [5, 6, [7, 8]]]]
    function flat(b) {
        let res = [];
        function help(b) {
            for (let i = 0; i < b.length; i++) {
                if (Array.isArray(b[i])) {
                    help(b[i])
                } else {
                    res.push(b[i])
                }
            }
        }
        help(b)
        return res
    }
    console.log(flat(a))

    // 死循环
    a.push(a)
    console.log(a)
    let map = new Map();
    function flat2(arr) {
        let res = []
        if (map.get(arr)) return map.get(arr)
        map.set(arr, res)
        for (let item of arr) {
            if (Array.isArray(item)) {
                // res = res.concat(flat2(item))
                res.push(...flat2(item))
            } else {
                res.push(item)
            }
        }
        return res
    }
    console.log(flat2(a))
</script>