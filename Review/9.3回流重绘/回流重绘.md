###  回流和重绘

#### 回流
> 回流发生在浏览器渲染页面的过程里，由DOM树和样式计算出布局树的过程就叫做回流，这个步骤需要计算出每个元素的大小和位置（忽略display:none的元素）
![](https://user-gold-cdn.xitu.io/2020/3/31/171308c0e02be077?w=1142&h=984&f=png&s=335486)
#### 重绘
> 我们将布局树和样式转换为屏幕上的实际像素，这个阶段就叫做重绘节点。所以，**回流必定导致重绘，重绘却不一定回流，且回流的代价比重绘高。**
#### 性能优化
* 浏览器自身有优化，它会维持一个待更新队列，类似批处理的方式来优化。但是如果触发了同步布局事件，浏览器就会强制flush这个队列。所以我们要避免触发同步布局事件，我们熟悉的有如下：
> getBoundingClientRect、offsetTop、offsetLeft、offsetWidth、offsetHeight
* 通过减少重绘重排的发生次数，避免使用如下代码，而应该使用`el.style.cssText += 'border-left: 1px; border-right: 2px; padding: 5px;'`,或者对修改类名
```js
const el = document.getElementById('test');
el.style.padding = '5px';
el.style.borderLeft = '1px';
el.style.borderRight = '2px';
```
* 避免频繁操作DOM结构,如果需要可以先把他们`display：none`(因为这些元素不会出现不会触发回流重绘)，等待dom操作结束后在把他们放出来
* 具有复杂动画操作的元素使用绝对定位，使其脱离文档流减少父节点和后续节点的频繁回流
* GPU加速，就是使用一些css开启CUP加速如transform、opacity、filters这些动画不会引起回流重绘